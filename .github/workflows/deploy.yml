name: Deploy to VPS

on:
  workflow_dispatch:
    inputs:
      source:
        description: 'Who triggered the deploy'
        required: true
        type: string

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout infra repo
        uses: actions/checkout@v6.0.1
      - name: feqjfhqze
        run: echo "Ã§a marche"

      # - name: Setup SSH
      #   run: |
      #     mkdir -p ~/.ssh
      #     echo "${{ secrets.VPS_SSH_KEY }}" > ~/.ssh/id_rsa
      #     chmod 600 ~/.ssh/id_rsa
      #     ssh-keyscan -H ${{ secrets.VPS_HOST }} >> ~/.ssh/known_hosts
      # - name: Debug VPS host
      #   run: |
      #     echo "USER=${{ secrets.VPS_USER }}"
      #     echo "HOST=${{ secrets.VPS_HOST }}"
      # - name: Deploy on VPS
      #   run: |
      #     ssh ${{ secrets.VPS_USER }}@${{ secrets.VPS_HOST }} << 'EOF'
      #       set -e

      #       cd pong

      #       echo "ðŸš€ Deploy triggered by: ${{ github.event.inputs.source }}"

      #       if [ "${{ github.event.inputs.source }}" = "frontend" ]; then
      #         echo "ðŸ”„ Updating frontend..."
      #         cd frontend
      #         git pull origin main
      #         cd ..
      #       fi

      #       if [ "${{ github.event.inputs.source }}" = "backend" ]; then
      #         echo "ðŸ”„ Updating backend..."
      #         cd backend
      #         git pull origin main
      #         cd..
      #       fi

      #       echo "ðŸ³ Docker compose build & up"
      #       docker compose up -d --build

      #       echo "âœ… Deployment finished"
      #     EOF
